import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as t,c as o,b as l}from"./app-DrsE8OIX.js";const r={},d=l('<h2 id="现象" tabindex="-1"><a class="header-anchor" href="#现象"><span>现象</span></a></h2><p>磁盘满了，删除文件后，文件空间不释放</p><h2 id="原因" tabindex="-1"><a class="header-anchor" href="#原因"><span>原因</span></a></h2><p>某些进程占用文件句柄，导致空间无法释放。</p><h2 id="处理方式" tabindex="-1"><a class="header-anchor" href="#处理方式"><span>处理方式</span></a></h2><h3 id="lsof" tabindex="-1"><a class="header-anchor" href="#lsof"><span>lsof</span></a></h3><p>通过<code>lsof | grep deleted</code>找到未能删除掉的文件，确定占用的进程号 通过 <code>ls -l /proc/PID/fd/* | grep</code>文件名，找到相应文件句柄 清除文件内容 <code>echo &gt; /proc/PID/fd/FD_NUM</code></p><h3 id="lsof替代命令" tabindex="-1"><a class="header-anchor" href="#lsof替代命令"><span>lsof替代命令</span></a></h3><p><code>find /proc/*/fd -ls|grep&quot;(deleted)&#39;</code>:这个命令使用 find 命令来查找 /proc 目录下的文件描述符，并列出被标记为&quot;(deleted)&quot;的文件。然后使用grep来过滤出包含&quot;(deleted)&quot;的行。</p><p><code>lsof +L1</code>:这个命令使用lsof命令来列出被删除但仍然被打开的文件。+L1 参数告诉lsof 只显示被删除的文件。</p><p><code>ls -l /proc/*/fd|grep&#39;(deleted)&#39;</code>:这个命令使用 ls命令来列出/proc 目录下的文件描述符，并使用 grep 过滤出包含&quot;(deleted)&quot;的行。</p>',11),a=[d];function s(n,c){return t(),o("div",null,a)}const h=e(r,[["render",s],["__file","file_deleted.html.vue"]]),f=JSON.parse('{"path":"/work/question/file_deleted.html","title":"文件删除空间不释放","lang":"zh-CN","frontmatter":{"title":"文件删除空间不释放","icon":"question","description":"现象 磁盘满了，删除文件后，文件空间不释放 原因 某些进程占用文件句柄，导致空间无法释放。 处理方式 lsof 通过lsof | grep deleted找到未能删除掉的文件，确定占用的进程号 通过 ls -l /proc/PID/fd/* | grep文件名，找到相应文件句柄 清除文件内容 echo > /proc/PID/fd/FD_NUM lso...","head":[["meta",{"property":"og:url","content":"https://yuhaoxiang.github.io/work-blog/work-blog/work/question/file_deleted.html"}],["meta",{"property":"og:site_name","content":"大杂烩"}],["meta",{"property":"og:title","content":"文件删除空间不释放"}],["meta",{"property":"og:description","content":"现象 磁盘满了，删除文件后，文件空间不释放 原因 某些进程占用文件句柄，导致空间无法释放。 处理方式 lsof 通过lsof | grep deleted找到未能删除掉的文件，确定占用的进程号 通过 ls -l /proc/PID/fd/* | grep文件名，找到相应文件句柄 清除文件内容 echo > /proc/PID/fd/FD_NUM lso..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-15T01:10:45.000Z"}],["meta",{"property":"article:author","content":"yhx"}],["meta",{"property":"article:modified_time","content":"2024-11-15T01:10:45.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"文件删除空间不释放\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-11-15T01:10:45.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"yhx\\",\\"url\\":\\"/\\"}]}"]]},"headers":[{"level":2,"title":"现象","slug":"现象","link":"#现象","children":[]},{"level":2,"title":"原因","slug":"原因","link":"#原因","children":[]},{"level":2,"title":"处理方式","slug":"处理方式","link":"#处理方式","children":[{"level":3,"title":"lsof","slug":"lsof","link":"#lsof","children":[]},{"level":3,"title":"lsof替代命令","slug":"lsof替代命令","link":"#lsof替代命令","children":[]}]}],"git":{"createdTime":1731633045000,"updatedTime":1731633045000,"contributors":[{"name":"余浩翔","email":"1x2_ou6tn9m4r4@dingtalk.com","commits":1}]},"readingTime":{"minutes":0.81,"words":242},"filePathRelative":"work/question/file_deleted.md","localizedDate":"2024年11月15日","autoDesc":true}');export{h as comp,f as data};
